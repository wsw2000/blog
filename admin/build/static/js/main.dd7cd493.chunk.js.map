{"version":3,"sources":["utils/request.js","pages/Login/index.jsx","utils/useFetchState.js","pages/AddArticle/index.jsx","pages/ArticleList/index.jsx","pages/AdminIndex/index.jsx","App.js","index.js"],"names":["axios","defaults","baseURL","interceptors","request","use","config","data","JSON","stringify","headers","error","Promise","reject","response","apis","loginAdmin","resolve","method","url","withCredentials","then","res","getTypeInfo","addArticle","updateArticle","console","log","header","getArticleList","delArticle","id","getArticleById","Login","props","useState","userName","setUserName","passWord","setPassWord","isLoading","setIsLoading","checkLogin","a","message","userInfo","localStorage","setItem","openId","success","history","push","className","tip","spinning","title","bordered","style","width","size","placeholder","prefix","UserOutlined","onChange","e","target","value","Password","KeyOutlined","type","block","onClick","useFetchState","focus","useRef","state","setState","useEffect","current","setFetchState","useCallback","Option","Select","TextArea","Input","AddArticle","articleId","setArticleId","articleTitle","setArticleTitle","articleContent","setArticleContent","markdownContent","setMarkdownContent","introducemd","setIntroducemd","introducehtml","setIntroducehtml","showDate","setShowDate","typeInfo","setTypeInfo","selectedType","setSelectType","removeItem","code","content","introduce","html","marked","tmpInt","addTime","typeId","tmpId","match","params","setOptions","renderer","Renderer","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","changeContent","changeIntroduce","saveArticle","type_id","Date","valueOf","view_count","Math","ceil","random","insertId","isScuccess","gutter","span","defaultValue","onSelect","map","item","typeName","rows","onPressEnter","dangerouslySetInnerHTML","__html","date","dateString","ArticleList","listLoading","setListLoading","articleList","setArticleList","getlist","list","columns","dataIndex","key","align","render","text","record","Modal","confirm","icon","ExclamationCircleOutlined","okText","cancelText","onOk","onCancel","loading","dataSource","mountNode","rowKey","pagination","position","defaultPageSize","Header","Layout","Content","Footer","Sider","SubMenu","Menu","AdminIndex","collapsed","setCollapsed","minHeight","minWidth","breakpoint","collapsible","onCollapse","theme","mode","Item","FileDoneOutlined","background","paddingLeft","margin","padding","path","exact","component","textAlign","App","to","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.dd7cd493.chunk.js","sourcesContent":["\r\n\r\nimport axios from 'axios';\r\n\r\n// axios.defaults.baseURL = 'http://localhost:7001/admin'\r\naxios.defaults.baseURL = 'http://120.78.195.82:7001/admin'\r\n\r\n\r\n\r\n\r\n//http request 拦截器\r\naxios.interceptors.request.use(\r\n  config => {\r\n    // const token = getCookie('名称');注意使用的时候需要引入cookie方法，推荐js-cookie\r\n    config.data = JSON.stringify(config.data);\r\n    config.headers = {\r\n      'Content-Type':'application/json;charset=UTF-8'\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n//http response 拦截器\r\naxios.interceptors.response.use(\r\n  response => {\r\n    // console.log(response.data.data);\r\n    // if(response.data.data === '登录失败'){\r\n    //   window.location = '/login'\r\n    // }\r\n    return response;\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nconst apis = {\r\n  loginAdmin(data){\r\n    return new Promise((resolve,reject) =>{\r\n      axios({\r\n        method:'post',\r\n        url:'/checkLogin',\r\n        data,\r\n        withCredentials: true\r\n      }).then(res =>{\r\n        resolve(res)\r\n      })\r\n    })\r\n  },\r\n  getTypeInfo(){\r\n    return new Promise((resolve,reject) =>{\r\n      axios({url:`/getTypeInfo`,withCredentials:true}).then(res =>{\r\n        resolve(res)\r\n      })\r\n    })\r\n  },\r\n  addArticle(data){\r\n    return new Promise((resolve,reject) =>{\r\n      axios({\r\n        method:'post',\r\n        url:'/addArticle',\r\n        // header:{ 'Access-Control-Allow-Origin':'*' },\r\n        data,\r\n        withCredentials: true\r\n      }).then(res =>{\r\n        resolve(res)\r\n      })\r\n    })\r\n  },\r\n  updateArticle(data){\r\n    console.log(data);\r\n    return new Promise((resolve,reject) =>{\r\n      axios({\r\n        method:'post',\r\n        url:'/updateArticle',\r\n        header:{ 'Access-Control-Allow-Origin':'*' },\r\n        data,\r\n        withCredentials: true\r\n      }).then(res =>{\r\n        resolve(res)\r\n      })\r\n    })\r\n  },\r\n  getArticleList(){\r\n    return new Promise((resolve,reject) =>{\r\n      axios({url:`/getArticleList`,withCredentials:true}).then(res =>{\r\n        resolve(res)\r\n      })\r\n    })\r\n  },\r\n  delArticle(id){\r\n    return new Promise((resolve,reject) =>{\r\n      axios({url:`/delArticle/${id}`,withCredentials:true}).then(res =>{\r\n        resolve(res)\r\n      })\r\n    })\r\n  },\r\n  getArticleById(id) { \r\n    return new Promise((resolve,reject) =>{\r\n      axios({url:`/getArticleById/${id}`,withCredentials:true}).then(res =>{\r\n        resolve(res)\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nexport default apis","import React, { useState } from 'react';\r\nimport { Card, Input, Button, Spin, message } from 'antd';\r\nimport { KeyOutlined, UserOutlined } from '@ant-design/icons'\r\nimport './index.css'\r\nimport apis from '../../utils/request';\r\n\r\nconst Login = (props) => {\r\n  const [userName, setUserName] = useState('')\r\n  const [passWord, setPassWord] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const checkLogin = async() => {\r\n    setIsLoading(true)\r\n    if(!userName || !passWord) {\r\n      message.error('用户名or密码不能为空')\r\n      setIsLoading(false)\r\n      return\r\n    }\r\n    let userInfo = {\r\n      userName:userName,\r\n      passWord:passWord\r\n    }\r\n    const {data:res} =await apis.loginAdmin(userInfo)\r\n    if(res.data=='登录成功'){\r\n      setIsLoading(false)\r\n      localStorage.setItem('openId',res.openId)\r\n      message.success('登录成功')\r\n      props.history.push('/index')\r\n    }else{\r\n      setIsLoading(false)\r\n      message.error('用户名密码错误')\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"login-bg\">\r\n      <div className=\"login-div\">\r\n        <Spin tip=\"Loading...\" spinning={isLoading}>\r\n          <Card title=\"JSPang Blog  System\" bordered={true} style={{ width: 400 }} >\r\n            <Input\r\n              id=\"userName\"\r\n              size=\"large\"\r\n              placeholder=\"Enter your userName\"\r\n              prefix={<UserOutlined />}\r\n              onChange={(e) => { setUserName(e.target.value) }}\r\n            />\r\n            <br /><br />\r\n            <Input.Password\r\n              id=\"password\"\r\n              size=\"large\"\r\n              placeholder=\"Enter your password\"\r\n              prefix={<KeyOutlined />}\r\n              onChange={(e) => { setPassWord(e.target.value) }}\r\n            />\r\n            <br /><br />\r\n            <Button type=\"primary\" size=\"large\" block onClick={checkLogin} > Login in </Button>\r\n          </Card>\r\n        </Spin>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Login","import { useCallback, useEffect, useRef, useState } from 'react';\r\n\r\nfunction useFetchState(...props) {\r\n  const focus = useRef();\r\n  const [state, setState] = useState(...props);\r\n  useEffect(() => {\r\n    focus.current = true;\r\n    return () => (focus.current = false);\r\n  }, []);\r\n  const setFetchState = useCallback((...params) => {\r\n    focus.current && setState(...params);\r\n  }, []);\r\n  return [state, setFetchState];\r\n}\r\n\r\nexport default useFetchState;","import React, { useState,useEffect } from 'react';\r\nimport useFetchState  from '../../utils/useFetchState'\r\nimport marked from 'marked'\r\nimport './index.css'\r\nimport { Row, Col, Input, Select, Button, DatePicker,message } from 'antd'\r\nimport apis from '../../utils/request'\r\nconst { Option } = Select;\r\nconst { TextArea } = Input\r\nfunction AddArticle(props) {\r\n  const [articleId, setArticleId] = useFetchState(0)  // 文章的ID，如果是0说明是新增加，如果不是0，说明是修改\r\n  const [articleTitle, setArticleTitle] = useFetchState('')   //文章标题\r\n  const [articleContent, setArticleContent] = useFetchState('')  //markdown的编辑内容\r\n  const [markdownContent, setMarkdownContent] = useFetchState('预览内容') //html内容\r\n  const [introducemd, setIntroducemd] = useFetchState()            //简介的markdown内容\r\n  const [introducehtml, setIntroducehtml] = useFetchState('等待编辑') //简介的html内容\r\n  const [showDate, setShowDate] = useFetchState()   //发布日期\r\n  const [updateDate, setUpdateDate] = useFetchState() //修改日志的日期\r\n  const [typeInfo, setTypeInfo] = useFetchState([]) // 文章类别信息\r\n  const [selectedType, setSelectType] = useFetchState('请选择类别') //选择的文章类别\r\n\r\n  //文章类别 + 路由守卫\r\n  const getTypeInfo = async() =>{\r\n    const {data:res} = await apis.getTypeInfo()\r\n    if(res.data == '登录失败' || !res){\r\n      localStorage.removeItem('openId')\r\n      props.history.push('/login')  \r\n    }else {\r\n      setTypeInfo(res.data)\r\n    }\r\n  }\r\n  //根据id获取文章详情\r\n  const getArticleById = async(id) =>{\r\n    const {data:res} = await apis.getArticleById(id)\r\n    console.log(res);\r\n    if(res.code !== 1) return\r\n    console.log(res.data[0]);\r\n    setArticleTitle(res.data[0].title)\r\n    setArticleContent(res.data[0].content)\r\n    setIntroducemd(res.data[0].introduce)\r\n\r\n    let html=marked(res.data[0].content)\r\n    setMarkdownContent(html)\r\n    \r\n    let tmpInt = marked(res.data[0].introduce)\r\n    setIntroducehtml(tmpInt)\r\n\r\n    setShowDate(res.data[0].addTime)\r\n    setSelectType(res.data[0].typeId)\r\n  }\r\n  useEffect(()=>{\r\n    // const openId = localStorage.getItem('openId')\r\n    getTypeInfo()\r\n    let tmpId = props.match.params.id\r\n    //如果有文章id  代表修改\r\n    if(tmpId){\r\n      console.log(tmpId);\r\n      setArticleId(tmpId)\r\n      getArticleById(tmpId)\r\n    } \r\n  },[])\r\n  marked.setOptions({\r\n    renderer:new marked.Renderer(),\r\n    gfm: true,\r\n    pedantic: false,\r\n    sanitize: false,\r\n    tables: true,\r\n    breaks: false,\r\n    smartLists: true,\r\n    smartypants: false,\r\n  }); \r\n  const changeContent = (e)=>{\r\n    setArticleContent(e.target.value)  //markdown的编辑内容\r\n    let html = marked(e.target.value) \r\n    console.log(html);\r\n    setMarkdownContent(html) //预览html内容\r\n  }\r\n\r\n  const changeIntroduce = (e)=>{\r\n    setIntroducemd(e.target.value)\r\n    let html=marked(e.target.value)\r\n    setIntroducehtml(html)\r\n  }\r\n\r\n  const saveArticle = async()=>{\r\n    if(selectedType === '请选择类别'){\r\n        message.error('必须选择文章类别')\r\n        return false\r\n    }else if(!articleTitle){\r\n        message.error('文章标题不能为空')\r\n        return false\r\n    }else if(!articleContent){\r\n        message.error('文章内容不能为空')\r\n        return false\r\n    }else if(!introducemd){\r\n        message.error('简介不能为空')\r\n        return false\r\n    }else if(!showDate){\r\n        message.error('发布日期不能为空')\r\n        return false\r\n    }\r\n    // let datetext= showDate.replace('-','/') //把字符串转换成时间戳\r\n    const addArticle = {\r\n      type_id:selectedType,\r\n      title:articleTitle,\r\n      content:articleContent,\r\n      introduce:introducemd,\r\n      addTime:(new Date(showDate).valueOf()),\r\n    }\r\n    if(articleId === 0) {  //新增\r\n      addArticle.view_count =Math.ceil(Math.random()*100)+1000\r\n      const {data:res} = await apis.addArticle(addArticle)\r\n      setArticleId(res.insertId)\r\n      res.isScuccess === true ? message.success('发布成功') : message.error('发布失败')\r\n    }else {\r\n      console.log('articleId:'+articleId)\r\n      addArticle.id = articleId   //更新接口需要主键id  文章id\r\n      addArticle.view_count =Math.ceil(Math.random()*100)+1000\r\n      const {data:res} = await apis.updateArticle(addArticle)\r\n      res.isScuccess === true ? message.success('更新成功') : message.error('更新失败')\r\n    }\r\n  } \r\n  return (\r\n    <div>\r\n      <Row gutter={5}>\r\n        <Col span={18}>\r\n          <Row gutter={10} >\r\n            <Col span={20}>\r\n              <Input\r\n                placeholder=\"博客标题\"\r\n                size=\"large\"\r\n                value={articleTitle}\r\n                onChange={e=>{\r\n                  setArticleTitle(e.target.value)\r\n                }} />\r\n            </Col>\r\n            <Col span={4}>\r\n              <Select defaultValue={selectedType} size=\"large\" onSelect={value => setSelectType(value)}>\r\n                {\r\n                  typeInfo.map(item =>{\r\n                    return (\r\n                      <Option key={item.id} value={item.id}>{item.typeName}</Option>\r\n                    )\r\n                  })\r\n                }\r\n              </Select>\r\n            </Col>\r\n          </Row>\r\n          <br />\r\n          <Row gutter={10} >\r\n            <Col span={12}>\r\n            <TextArea\r\n              value={articleContent} \r\n              className=\"markdown-content\" \r\n              rows={35}  \r\n              onChange={changeContent} \r\n              onPressEnter={changeContent}\r\n              placeholder=\"文章内容\"\r\n            />\r\n            </Col>\r\n            <Col span={12}>\r\n              <div\r\n                className=\"show-html\"\r\n                dangerouslySetInnerHTML = {{__html:markdownContent}} >\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Row>\r\n            <Col span={24}>\r\n              <br />\r\n              <TextArea \r\n                rows={4} \r\n                value={introducemd}  \r\n                onChange={changeIntroduce} \r\n                onPressEnter={changeIntroduce}\r\n                placeholder=\"文章简介\"\r\n              />\r\n              <br /><br />\r\n              <div \r\n                className=\"introduce-html\"\r\n                dangerouslySetInnerHTML = {{__html:'文章简介：'+introducehtml}} >\r\n              </div>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div className=\"date-select\">\r\n                <DatePicker\r\n                  onChange={(date,dateString)=>setShowDate(dateString)}\r\n                  placeholder=\"发布日期\"\r\n                  size=\"large\"\r\n                />\r\n              </div>\r\n            </Col>\r\n            <Col span={24}>\r\n              <br/>\r\n              <Button size=\"large\">暂存文章</Button>&nbsp;\r\n              <Button type=\"primary\" size=\"large\" onClick={saveArticle}>发布文章</Button>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  )\r\n}\r\nexport default AddArticle","import React,{ useState,useEffect } from 'react'\r\nimport apis from '../../utils/request'\r\nimport { Table, Tag, Space, Modal,message} from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nfunction ArticleList(props) {\r\n  const [listLoading,setListLoading] = useState(false)\r\n  const [articleList,setArticleList] = useState([])\r\n  const handEdit = (id) => {\r\n    props.history.push('/home/add/'+id)\r\n  }\r\n  const handDelete = (id) =>{\r\n    Modal.confirm({\r\n      title: '确定要删除这篇博客文章吗?',\r\n      icon: <ExclamationCircleOutlined />,\r\n      okText: '确认',\r\n      cancelText: '取消',\r\n      async onOk(){\r\n        const {data:res} = await apis.delArticle(id)\r\n        console.log(res.code);\r\n        if(res.code !== 1) {\r\n         message.error('删除失败')\r\n        }\r\n        message.success('删除成功')\r\n        getlist()\r\n      },\r\n      onCancel() {\r\n        message.success('没有任何改变')\r\n      },\r\n    });\r\n  }\r\n  const getlist = async() => {\r\n    const {data:res} = await apis.getArticleList()\r\n    console.log(res);\r\n    if(res.data == '登录失败'){\r\n      // props.history.push('/login')\r\n      return\r\n    }\r\n    // if(res.code != 1) return\r\n    setArticleList(res.list)\r\n  }\r\n  useEffect(() => {\r\n    setListLoading(true)\r\n    getlist()\r\n    setListLoading(false)\r\n  }, []);\r\n  const columns = [\r\n    { title: 'id',dataIndex: 'id',key: 'id',align:'center' },\r\n    { title: '标题',dataIndex: 'title',key: 'title',align:'center' },\r\n    { title: '介绍',dataIndex: 'introduce',key: 'introduce',align:'center' },\r\n    { title: '时间',dataIndex: 'addTime',key: 'addTime',align:'center' },\r\n    { title: '类型',dataIndex: 'typeName',key: 'typeName',align:'center' },\r\n    { title: '内容',dataIndex: 'content',key: 'content',width:500 },\r\n    {\r\n      title: '操作',\r\n      dataIndex: 'action',\r\n      key: 'action',\r\n      align:'center',\r\n      render: (text, record) => (\r\n        <Space size=\"middle\">\r\n          <a onClick={()=>handEdit(record.id)}>edit</a>\r\n          <a onClick={()=>handDelete(record.id)}>Delete</a>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n  return (\r\n    <>\r\n      <Table \r\n        loading={listLoading} \r\n        bordered \r\n        columns={columns} \r\n        dataSource={articleList} \r\n        mountNode\r\n        rowKey={(item) => item.id}\r\n        pagination={{ position: ['topLeft'],defaultPageSize:5 }} \r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ArticleList","import React,{useState} from 'react';\r\nimport { Layout, Menu, Breadcrumb } from 'antd';\r\nimport './index.css'\r\nimport { PieChartOutlined, UserOutlined,FileDoneOutlined,BookOutlined } from '@ant-design/icons'\r\nimport { Route,Redirect } from 'react-router-dom';\r\nimport AddArticle from '../AddArticle'\r\nimport ArticleList from '../ArticleList'\r\n\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\nconst { SubMenu } = Menu;\r\n\r\nfunction AdminIndex(props){\r\n\r\n  const [collapsed,setCollapsed] = useState(false)\r\n\r\n  const onCollapse = collapsed => {\r\n    setCollapsed(collapsed)\r\n  };\r\n  const handleMenuClick = (e) =>{\r\n    props.history.push(`/home/${e.key}`)\r\n  }\r\n  return (\r\n    <Layout style={{ minHeight: '100vh',minWidth: '100%' }}>\r\n      <Sider  breakpoint=\"md\"  collapsible collapsed={collapsed} onCollapse={onCollapse}>\r\n        <div className=\"logo\"></div>\r\n        <Menu theme=\"dark\" mode=\"inline\">\r\n          <SubMenu\r\n            onClick={handleMenuClick}\r\n            key=\"article\"\r\n            title={\r\n              <span>\r\n                <UserOutlined />\r\n                <span>文章管理</span>\r\n              </span>\r\n            }\r\n          >\r\n            <Menu.Item key=\"add\">添加文章</Menu.Item>\r\n            <Menu.Item key=\"list\">文章列表</Menu.Item>\r\n          </SubMenu>\r\n\r\n          <Menu.Item key=\"message\">\r\n            <FileDoneOutlined />\r\n            <span>留言管理</span>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout>\r\n        <Header style={{ background: '#fff', paddingLeft:'12px'}}>\r\n          66\r\n        </Header>\r\n        <Content style={{ margin: '0 16px' }}>\r\n          <Breadcrumb style={{ margin: '16px 0' }}>\r\n            <Breadcrumb.Item>后台管理</Breadcrumb.Item>\r\n            <Breadcrumb.Item>工作台</Breadcrumb.Item>\r\n          </Breadcrumb>\r\n          <div style={{ padding: 24, background: '#fff'}}>\r\n            <Route path=\"/home/add/\" exact  component={AddArticle} />  \r\n            <Route path=\"/home/add/:id\" exact component={AddArticle} />  \r\n            <Route path=\"/home/list\"  component={ArticleList} />  \r\n            {/* <Redirect to=\"/home/list\"/> */}\r\n          </div>\r\n        </Content>\r\n        <Footer style={{ textAlign: 'center' }}>wsw2000.top</Footer>\r\n      </Layout>\r\n    </Layout>\r\n  )\r\n\r\n}\r\n\r\nexport default AdminIndex","import { BrowserRouter as Router,Route,Redirect,Switch} from 'react-router-dom';\nimport Login from './pages/Login';\nimport AdminIndex from './pages/AdminIndex';\n\n\nfunction App() {\n  return (\n    <Switch>\n      <Route path='/login' exact component={Login}/>\n      <Route path=\"/home\" component={AdminIndex} />\n      <Redirect to=\"/home/list\"/>\n    </Switch>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'antd/dist/antd.css';\nimport { HashRouter as Router } from 'react-router-dom';\nReactDOM.render(\n  <Router>  \n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}